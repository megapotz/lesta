# Техническое Задание: Lesta Blogger HUB (MVP)

## 1. Цели и Задачи

### 1.1. Бизнес-цель MVP
Создать демонстрационную версию системы для Директора по маркетингу (CMO). Основная задача — показать возможность централизованного учета блогеров и контроля расходов на инфлюенсер-маркетинг. Система должна стать первым шагом к устранению хаоса в закупках и заложить основу для прозрачной аналитики.

### 1.2. Цель проекта
Оценить эффективность итеративной разработки ТЗ и последующей реализации с помощью AI-ассистента.

## 2. Глоссарий

- **Кампания** — совокупность маркетинговых активностей (размещений), объединенных общей целью, сроками и бюджетом.
- **Размещение** — ключевая единица учета; конкретная публикация или иная активность у блогера в рамках кампании (например, пост, видео, стрим).
- **Контрагент** — юридическое или физическое лицо (ООО, ИП, самозанятый), с которым производятся финансовые расчеты за размещения.
- **Блогер / Инфлюенсер** — создатель контента, который публикует рекламные материалы. Может быть как связан с контрагентом, так и работать напрямую.
- **ER (Engagement Rate)** — метрика вовлеченности аудитории, рассчитываемая по формуле (лайки + комментарии + репосты) / просмотры * 100%. В MVP вносится вручную.
- **Модель оплаты (Pricing Model)** — способ оплаты за размещение.
    - **Fix** — фиксированная стоимость за публикацию.
    - **CPA (Cost Per Action)** — оплата за целевое действие (например, регистрация).
    - **RevShare (Revenue Share)** — процент от дохода, который принесли привлеченные игроки.
    - **Бартер** — оплата продукцией или внутриигровыми ценностями.

## 3. Ключевые Пользователи (Роли)

### 3.1. Маркетинг-менеджер
**Описание:** Основной операционный пользователь системы.
**Задачи:**
- Создание и ведение маркетинговых кампаний.
- Добавление и обновление информации по блогерам и контрагентам.
- Фиксация договоренностей по размещениям (стоимость, даты, модель оплаты).
- Внесение фактических результатов (метрик) после публикаций.

### 3.2. CMO (Директор по маркетингу)
**Описание:** Ключевой стейкхолдер, для которого создается MVP.
**Задачи:**
- Получение сводной информации на дэшборде о ходе кампаний.
- Анализ общих расходов и эффективности по блогерам и кампаниям.
- Принятие стратегических решений на основе полученных данных.

### 3.3. Вне скоупа MVP
В будущем предполагается создание личных кабинетов для внешних пользователей (блогеров, контрагентов), но в рамках MVP их доступ к системе **не реализуется**.

## 4. Основной Пользовательский Сценарий (Primary User Flow)

1.  **Создание Кампании:** Менеджер заходит в систему и создает новую "Кампанию", указывая ее цели и бюджет.
2.  **Наполнение Базы:** Менеджер находит в системе существующих "Блогеров" или добавляет новых, заполняя их профили (соцсети, подписчики, охваты).
3.  **Планирование Размещений:** Менеджер добавляет "Размещения" в кампанию, связывая их с конкретными блогерами.
4.  **Фиксация Договоренностей:** В карточке "Размещения" менеджер фиксирует финансовые и организационные детали: стоимость, модель оплаты, дата публикации.
5.  **Сбор Фактических Данных:** После выхода публикации менеджер меняет ее статус и вносит в систему фактические метрики: просмотры, лайки, ER и т.д.
6.  **Анализ и Контроль:** CMO на "Дэшборде" и в отчетах видит общую картину: сколько денег потрачено, какие результаты получены по кампаниям и отдельным блогерам.

## 5. Функциональные Требования

### 5.1. Жизненный цикл "Размещения"
"Размещение" является ключевой сущностью, отражающей динамику работы с блогером. Для отслеживания этого процесса вводится поле **"Статус"**.

#### 5.1.1. Статусы Размещения:
- **`Планируется`**: Начальный статус. Менеджер добавил размещение в кампанию, ведет переговоры.
- **`Согласовано`**: Блогер подтвердил участие. На этом этапе поля "Стоимость" и "Дата публикации" становятся обязательными для заполнения.
- **`Отклонено`**: Блогер отказался от участия. Размещение скрывается из основного рабочего списка, но остается в системе для истории.
- **`Ожидает оплаты`**: Размещение требует предоплаты и готово для передачи в бухгалтерию.
- **`Оплачено, ждем публикацию`**: Предоплата совершена, ожидается дата публикации.
- **`Опубликовано`**: Публикация размещена. Менеджер должен внести фактические метрики (просмотры, лайки и т.д.).
- **`Просрочено`**: Дата публикации прошла, но статус не был изменен на "Опубликовано". Система должна визуально подсвечивать такие размещения в интерфейсе (например, красным цветом), чтобы привлечь внимание менеджера.
- **`Завершено`**: Все метрики внесены, произведена постоплата (если требовалась). Работа по размещению полностью завершена.

#### 5.1.2. Условия оплаты:
В карточку "Размещения" необходимо добавить поле **"Условия оплаты"** с вариантами:
- Предоплата
- Постоплата
- Частичная оплата

### 5.2. Ключевые функции, связанные с жизненным циклом

#### 5.2.1. Экспорт для бухгалтерии
- В системе должна быть возможность отфильтровать все размещения со статусом **`Ожидает оплаты`**.
- Должна быть реализована функция **экспорта** этого отфильтрованного списка в формат `.xlsx` или `.csv`.
- Выгрузка должна содержать минимально необходимую для оплаты информацию: Название контрагента, ИНН, сумма, название кампании.

#### 5.2.2. Уведомления и подсветка
- Размещения со статусом **`Просрочено`** должны быть визуально выделены в общем списке (например, в таблице на экране "Детали Кампании").

### 5.3. Детализация экранов

#### 5.3.1. Экран "Детали Кампании"
Это ключевой рабочий экран менеджера. Таблица размещений должна быть максимально информативной и функциональной.

**Таблица "Размещения в Кампании":**

- **Состав полей:**
    - `ID`
    - `Placement Date` (Дата размещения)
    - `Инфлюенсер`
    - `Контрагент`
    - `Type of placement` (Тип)
    - `Pricing Model` (Модель оплаты)
    - `Fee` (Стоимость)
    - `Ссылка на публикацию`
    - `Views` (Просмотры)
    - `Likes` (Лайки)
    - `Actual engagement rate (ER)`: **В MVP вводится вручную.**
    - `Статус`: **Единое поле статуса**, отражающее весь жизненный цикл (см. п. 5.1.1).
    - `Действия`

- **Фильтрация и сортировка:**
    - **Фильтры:** Должна быть панель для фильтрации списка по следующим параметрам:
        - `Инфлюенсер`
        - `Контрагент`
        - `Type of placement`
        - `Статус` (единый)
        - `Placement Date` (по диапазону дат)
    - **Сортировка:** Все колонки таблицы должны быть сортируемыми по возрастанию/убыванию при клике на их заголовок.

- **Действия с размещениями:**
    - **Удаление:** Кнопка "Удалить" активна **только** для размещений в статусе `Планируется`. Во всех остальных статусах удаление запрещено для сохранения истории.
    - **Редактирование:**
        - Поле `Fee` (Стоимость) можно редактировать до перехода в статус `Оплачено, ждем публикацию`. После этого поле блокируется.
        - Поля метрик (`Views`, `Likes`, `ER`) доступны для редактирования **только** после перехода в статус `Опубликовано`.

#### 5.3.2. Экран "Блогеры"
- **Уникальность:** Уникальность блогера в системе определяется полем "Ссылка на канал/профиль". При добавлении нового блогера система должна проверять, не существует ли уже запись с такой ссылкой, и выводить ошибку в случае дублирования.
- **Связь с контрагентами:** Реализуется связь "многие-ко-многим". Один блогер может быть связан с несколькими контрагентами, и один контрагент может работать с несколькими блогерами.
- **Обновление метрик:** Все метрики в профиле блогера (`Количество подписчиков`, `Средний охват поста` и т.д.) в MVP обновляются вручную менеджером.

#### 5.3.3. Экран "Контрагенты"
- **Деактивация:** Реализуется логика "мягкого удаления".
    - Если с контрагентом не связано ни одного "Размещения", его можно полностью удалить из системы.
    - Если есть связанные размещения, его можно только "Деактивировать".
    - Деактивированный контрагент не отображается в выпадающих списках при создании/редактировании новых размещений, но сохраняется во всех исторических записях для целостности данных.

## 6. Справочники (Выпадающие списки)

Для обеспечения консистентности данных, следующие поля должны быть реализованы в виде выпадающих списков с предопределенными значениями.

### 6.1. Type of placement (Тип размещения)
Отвечает на вопрос: "Что именно мы покупаем у блогера?".
- `Пост` (в Telegram, VK, Дзен)
- `Видео` (полноценное видео на YouTube, VK)
- `Shorts / Reels` (короткое вертикальное видео)
- `Стриминг` (спонсорская трансляция на Twitch, YouTube)
- `Сторис` (серия в Instagram, VK)
- `Интеграция в контент`
- `Анонс`

### 6.2. Pricing Model (Модель оплаты)
Отвечает на вопрос: "Как мы платим за это размещение?".
- `Fix` (Фиксированная плата): Оплата за факт публикации.
- `CPA` (Cost Per Action): Оплата за целевое действие (например, регистрацию).
- `RevShare` (Revenue Share): Процент от дохода, который принесли привлеченные игроки.
- `Бартер`: Оплата продукцией или внутриигровыми ценностями.

**Примечание для MVP:** В рамках MVP система не будет автоматически отслеживать эффективность `CPA` и `RevShare`. Поле `Fee` для этих моделей будет заполняться менеджером вручную на основе данных из внешних систем аналитики.
