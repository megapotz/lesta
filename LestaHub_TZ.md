# Техническое Задание: Lesta Blogger HUB (MVP)

## 1. Введение

### 1.1. Бизнес-цель MVP
Создать демонстрационную версию системы для Директора по маркетингу (CMO). Основная задача — показать возможность централизованного учета блогеров и контроля расходов на инфлюенсер-маркетинг. Система должна стать первым шагом к устранению хаоса в закупках и заложить основу для прозрачной аналитики.

### 1.2. Цель проекта
Оценить эффективность итеративной разработки ТЗ и последующей реализации с помощью AI-ассистента.

## 2. Пользователи и Роли

### 2.1. Маркетинг-менеджер
**Описание:** Основной операционный пользователь системы.
**Задачи:**
- Создание и ведение маркетинговых кампаний.
- Добавление и обновление информации по блогерам и контрагентам.
- Фиксация договоренностей по размещениям (стоимость, даты, модель оплаты).
- Внесение фактических результатов (метрик) после публикаций.
- Формирование и выгрузка реестров на оплату для бухгалтерии.

### 2.2. CMO (Директор по маркетингу)
**Описание:** Ключевой стейкхолдер, для которого создается MVP.
**Задачи:**
- Получение сводной информации на дэшборде о ходе кампаний.
- Анализ общих расходов и эффективности по блогерам и кампаниям.
- Принятие стратегических решений на основе полученных данных.

### 2.3. Вне скоупа MVP
В будущем предполагается создание личных кабинетов для внешних пользователей (блогеров, контрагентов), но в рамках MVP их доступ к системе **не реализуется**.

## 3. Пользовательские Истории (User Stories)

### 3.1. Маркетинг-менеджер

**Тема: Подготовка кампании**

1.  **Создание кампании:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** создавать новую кампанию (указав название, продукт, цель, бюджет),
    *   **Чтобы** сгруппировать все связанные размещения и отслеживать общий прогресс и расходы.

2.  **Пополнение базы блогеров:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** добавлять в общую базу данных новых блогеров с их ключевыми метриками (канал, подписчики, охваты),
    *   **Чтобы** формировать пул потенциальных партнеров для будущих кампаний.

3.  **Формирование списка для кампании:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** добавлять в конкретную кампанию как существующих, так и новых блогеров,
    *   **Чтобы** сформировать список участников для дальнейших переговоров.

**Тема: Переговоры и согласование**

4.  **Фиксация итогов переговоров:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** изменять статус размещения на `Согласовано` (указав финальную стоимость и дату) или `Отклонено`,
    *   **Чтобы** четко отделить тех, кто в работе, от тех, кто отказался.

5.  **Подготовка реестра на оплату:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** выгружать в `.xlsx` файл список всех размещений, требующих предоплаты,
    *   **Чтобы** передать в бухгалтерию единый реестр на оплату.

**Тема: Контроль и отчетность**

6.  **Контроль сроков публикаций:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу**, чтобы система визуально (например, красным цветом) подсвечивала размещения, у которых прошла дата публикации, но статус еще не обновлен,
    *   **Чтобы** я не забывал проверить факт выхода публикации.

7.  **Внесение результатов:**
    *   **Как** Маркетинг-менеджер,
    *   **Я хочу** вносить фактические метрики (просмотры, лайки) для размещений, переведенных в статус `Опубликовано`,
    *   **Чтобы** накопить данные для последующего анализа эффективности.

## 4. Модель Данных и Сущности

### 4.1. Жизненный цикл "Размещения"
"Размещение" является ключевой сущностью, отражающей динамику работы с блогером. Для отслеживания этого процесса вводится поле **"Статус"**.

#### 4.1.1. Статусы Размещения:
- **`Планируется`**: Начальный статус. Менеджер добавил размещение в кампанию, ведет переговоры.
- **`Согласовано`**: Блогер подтвердил участие. На этом этапе поля "Стоимость" и "Дата публикации" становятся обязательными для заполнения.
- **`Отклонено`**: Блогер отказался от участия. Размещение скрывается из основного рабочего списка, но остается в системе для истории.
- **`Ожидает оплаты`**: Размещение требует предоплаты и готово для передачи в бухгалтерию.
- **`Оплачено, ждем публикацию`**: Предоплата совершена, ожидается дата публикации.
- **`Опубликовано`**: Публикация размещена. Менеджер должен внести фактические метрики (просмотры, лайки и т.д.).
- **`Просрочено`**: Дата публикации прошла, но статус не был изменен на "Опубликовано".
- **`Завершено`**: Все метрики внесены, произведена постоплата (если требовалась). Работа по размещению полностью завершена.

#### 4.1.2. Условия оплаты:
В карточку "Размещения" необходимо добавить поле **"Условия оплаты"** с вариантами:
- Предоплата
- Постоплата
- Частичная оплата

### 4.2. Справочники (Выпадающие списки)
Для обеспечения консистентности данных, следующие поля должны быть реализованы в виде выпадающих списков с предопределенными значениями.

#### 4.2.1. Type of placement (Тип размещения)
Отвечает на вопрос: "Что именно мы покупаем у блогера?".
- `Пост` (в Telegram, VK, Дзен)
- `Видео` (полноценное видео на YouTube, VK)
- `Shorts / Reels` (короткое вертикальное видео)
- `Стриминг` (спонсорская трансляция на Twitch, YouTube)
- `Сторис` (серия в Instagram, VK)
- `Интеграция в контент`
- `Анонс`

#### 4.2.2. Pricing Model (Модель оплаты)
Отвечает на вопрос: "Как мы платим за это размещение?".
- `Fix` (Фиксированная плата): Оплата за факт публикации.
- `CPA` (Cost Per Action): Оплата за целевое действие (например, регистрацию).
- `RevShare` (Revenue Share): Процент от дохода, который принесли привлеченные игроки.
- `Бартер`: Оплата продукцией или внутриигровыми ценностями.

### 4.3. Связи между сущностями
- **Блогер и Контрагент:** Реализуется связь "многие-ко-многим". Один блогер может быть связан с несколькими контрагентами, и один контрагент может работать с несколькими блогерами.

## 5. Функциональные Требования

### 5.1. Управление данными
- **Уникальность блогера:** Уникальность блогера в системе определяется полем "Ссылка на канал/профиль". При добавлении нового блогера система должна проверять, не существует ли уже запись с такой ссылкой, и выводить ошибку в случае дублирования.
- **Обновление метрик блогера:** Все метрики в профиле блогера (`Количество подписчиков`, `Средний охват поста` и т.д.) в MVP обновляются вручную менеджером.
- **Деактивация контрагента:** Реализуется логика "мягкого удаления".
    - Если с контрагентом не связано ни одного "Размещения", его можно полностью удалить из системы.
    - Если есть связанные размещения, его можно только "Деактивировать".
    - Деактивированный контрагент не отображается в выпадающих списках при создании/редактировании новых размещений, но сохраняется во всех исторических записях для целостности данных.
- **Редактирование стоимости:** Поле `Fee` (Стоимость) в "Размещении" можно редактировать до перехода в статус `Оплачено, ждем публикацию`. После этого поле блокируется.
- **Редактирование метрик:** Поля метрик (`Views`, `Likes`, `ER`) в "Размещении" доступны для редактирования **только** после перехода в статус `Опубликовано`.

### 5.2. Экспорт данных
- **Экспорт для бухгалтерии:**
    - В системе должна быть возможность отфильтровать все размещения со статусом **`Ожидает оплаты`**.
    - Должна быть реализована функция **экспорта** этого отфильтрованного списка в формат `.xlsx` или `.csv`.
    - Выгрузка должна содержать минимально необходимую для оплаты информацию: Название контрагента, ИНН, сумма, название кампании.

### 5.3. Примечания по MVP
- **Отслеживание CPA/RevShare:** В рамках MVP система не будет автоматически отслеживать эффективность `CPA` и `RevShare`. Поле `Fee` для этих моделей будет заполняться менеджером вручную на основе данных из внешних систем аналитики.

## 6. Требования к Интерфейсу (UI/UX)

### 6.1. Экран "Детали Кампании"
Это ключевой рабочий экран менеджера. Таблица размещений должна быть максимально информативной и функциональной.

**Таблица "Размещения в Кампании":**

- **Состав полей:**
    - `ID`
    - `Placement Date` (Дата размещения)
    - `Инфлюенсер`
    - `Контрагент`
    - `Type of placement` (Тип)
    - `Pricing Model` (Модель оплаты)
    - `Fee` (Стоимость)
    - `Ссылка на публикацию`
    - `Views` (Просмотры)
    - `Likes` (Лайки)
    - `Actual engagement rate (ER)`: **В MVP вводится вручную.**
    - `Статус`: **Единое поле статуса**, отражающее весь жизненный цикл.
    - `Действия`

- **Фильтрация и сортировка:**
    - **Фильтры:** Должна быть панель для фильтрации списка по следующим параметрам:
        - `Инфлюенсер`
        - `Контрагент`
        - `Type of placement`
        - `Статус` (единый)
        - `Placement Date` (по диапазону дат)
    - **Сортировка:** Все колонки таблицы должны быть сортируемыми по возрастанию/убыванию при клике на их заголовок.

- **Действия с размещениями:**
    - **Удаление:** Кнопка "Удалить" активна **только** для размещений в статусе `Планируется`. Во всех остальных статусах удаление запрещено для сохранения истории.

- **Визуальные индикаторы:**
    - **Подсветка просроченных размещений:** В таблице размещений строки со статусом `Оплачено, ждем публикацию`, у которых `Placement Date` уже прошла, должны визуально выделяться (например, вся строка получает бледно-красный фон). Это должно сигнализировать менеджеру о необходимости проверить факт публикации.
    - **Подсветка просроченных размещений (статус `Просрочено`):** Размещения со статусом `Просрочено` должны быть визуально выделены в общем списке.

## 7. Нефункциональные требования
*(Здесь будут описаны требования к производительности, безопасности, надежности и т.д.)*

---

## Приложение А: Глоссарий

- **Кампания** — совокупность маркетинговых активностей (размещений), объединенных общей целью, сроками и бюджетом.
- **Размещение** — ключевая единица учета; конкретная публикация или иная активность у блогера в рамках кампании (например, пост, видео, стрим).
- **Контрагент (Counterparty):** Юридическое или физическое лицо, ответственное за финансовые и организационные обязательства. Может быть приглашен в систему как "Пользователь" и управлять одним или несколькими "Блогерами".
- **Блогер (Blogger):** Медийный ресурс (YouTube-канал, Telegram-канал и т.д.), характеризуемый аудиторными метриками. Является "витриной" для "Размещений".
- **ER (Engagement Rate)** — метрика вовлеченности аудитории, рассчитываемая по формуле (лайки + комментарии + репосты) / просмотры * 100%. В MVP вносится вручную.
- **Модель оплаты (Pricing Model)** — способ оплаты за размещение.
    - **Fix** — фиксированная стоимость за публикацию.
    - **CPA (Cost Per Action)** — оплата за целевое действие (например, регистрация).
    - **RevShare (Revenue Share)** — процент от дохода, который принесли привлеченные игроки.
    - **Бартер** — оплата продукцией или внутриигровыми ценностями.